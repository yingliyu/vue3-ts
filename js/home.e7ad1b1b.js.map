{"version":3,"sources":["webpack:///./src/assets/dog1.png","webpack:///./src/views/home/index.vue","webpack:///./src/components/column-item.vue","webpack:///./src/components/column-item.vue?4632","webpack:///./src/components/column-item.vue?1f35","webpack:///./src/hooks/use-load-more.ts","webpack:///./src/views/home/index.vue?c546","webpack:///./src/views/home/index.vue?eb7c","webpack:///./src/views/home/imgs/create-ico.png"],"names":["module","exports","class","width","src","alt","to","list","isLastPage","type","loadMorePage","columnList","item","index","key","id","height","avatar","url","title","description","name","props","Array","required","setup","map","column","render","useLoadMore","actionName","total","params","currentPage","pageSize","store","requestParams","value","dispatch","then","Math","ceil","components","state","columns","root","getters","biggerColumnLen"],"mappings":"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","file":"js/home.e7ad1b1b.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/dog1.35e425f7.png\";","<template>\n  <div class=\"home-wrapper text-center\">\n    <img width=\"400\" src=\"./imgs/create-ico.png\" alt=\"\" />\n    <h2 class=\"mb-3\">随心写作 自由表达</h2>\n    <p>\n      <router-link to=\"/post/create\" class=\"btn btn-primary\">开始写文章</router-link>\n    </p>\n    <column-list :list=\"list\" class=\"pt-3\"></column-list>\n    <button\n      v-if=\"!isLastPage\"\n      type=\"button\"\n      class=\"btn btn-outline-primary mt-2 mb-5 mx-auto btn-block w-25\"\n      @click=\"loadMorePage\"\n    >\n      加载更多\n    </button>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, computed, onMounted } from 'vue';\nimport columnList from '../../components/column-item.vue';\nimport { useStore, mapGetters } from 'vuex';\nimport { GlobalDataProps } from '../../stores/type';\nimport useLoadMore from '../../hooks/use-load-more';\nexport default defineComponent({\n  name: 'Home',\n  components: { columnList },\n  // computed: {\n  //   ...mapGetters('columns', { list: 'getColumns' })\n  // },\n\n  setup() {\n    const store = useStore<GlobalDataProps>();\n    const total = computed(() => store.state.columns.total);\n    const currentPage = computed(() => store.state.columns.currentPage);\n    // 全局类型会有自动补全功能\n    onMounted(() => {\n      store.dispatch('columns/getColumnsAction', { pageSize: 6 }, { root: true });\n    });\n    // 状态储存是响应式，从store实例读取状态最简单的方法是在计算属性中返回某个状态\n\n    const list = computed(() => store.getters['columns/getColumns']);\n    const biggerColumnLen = computed(() => store.getters['columns/biggerColumnLen']);\n    const { loadMorePage, isLastPage } = useLoadMore('columns/getColumnsAction', total, {\n      pageSize: 6,\n      currentPage: currentPage.value ? currentPage.value + 1 : 2\n    });\n\n    return {\n      biggerColumnLen,\n      list,\n      loadMorePage,\n      isLastPage\n    };\n  }\n});\n</script>\n<style scoped></style>\n","<template>\n  <div class=\"row\">\n    <div v-for=\"(item, index) in columnList\" :key=\"`${item.id}_${index}`\" class=\"col-4 mb-3\">\n      <div class=\"card h-100 shadow\">\n        <div class=\"card-body text-center\">\n          <img\n            width=\"60\"\n            height=\"60\"\n            :src=\"item.avatar && item.avatar.url\"\n            class=\"rounded-circle border border-light my-3\"\n          />\n          <h5 class=\"card-title\">{{ item.title }}</h5>\n          <p class=\"card-text text-start\">{{ item.description }}</p>\n          <router-link :to=\"`/column/${item.id}`\" class=\"btn btn-outline-primary\"\n            >进入专栏</router-link\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType } from 'vue';\nimport { ColumnProps } from '@/stores/type';\nexport default defineComponent({\n  name: 'ColumnItem',\n  props: {\n    list: {\n      type: Array as PropType<ColumnProps[]>,\n      required: true\n    }\n  },\n  setup(props) {\n    const columnList = computed(() => {\n      return props.list.map((column) => {\n        column.avatar = !column.avatar ? require('@/assets/dog1.png') : column.avatar;\n        return column;\n      });\n    });\n\n    return { columnList };\n  }\n});\n</script>\n<style lang=\"less\" scoped></style>\n","\nimport { computed, defineComponent, PropType } from 'vue';\nimport { ColumnProps } from '@/stores/type';\nexport default defineComponent({\n  name: 'ColumnItem',\n  props: {\n    list: {\n      type: Array as PropType<ColumnProps[]>,\n      required: true\n    }\n  },\n  setup(props) {\n    const columnList = computed(() => {\n      return props.list.map((column) => {\n        column.avatar = !column.avatar ? require('@/assets/dog1.png') : column.avatar;\n        return column;\n      });\n    });\n\n    return { columnList };\n  }\n});\n","import { render } from \"./column-item.vue?vue&type=template&id=a7a3f746\"\nimport script from \"./column-item.vue?vue&type=script&lang=ts\"\nexport * from \"./column-item.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { useStore } from 'vuex';\nimport { ref, computed, ComputedRef } from 'vue';\n\ninterface LoadParams {\n  currentPage: number;\n  pageSize: number;\n}\nconst useLoadMore = (\n  actionName: string,\n  total: ComputedRef<number>,\n  params: LoadParams = { currentPage: 2, pageSize: 6 }\n) => {\n  const store = useStore();\n  const currentPage = ref(params.currentPage);\n  // 使用计算属性或者reactive\n  const requestParams = computed(() => ({\n    currentPage: currentPage.value,\n    pageSize: params.pageSize\n  }));\n  const loadMorePage = () => {\n    store.dispatch(actionName, requestParams.value).then(() => {\n      currentPage.value++;\n    });\n  };\n  const isLastPage = computed(() => {\n    return Math.ceil(total.value / params.pageSize) < currentPage.value;\n  });\n  return { loadMorePage, isLastPage, currentPage };\n};\nexport default useLoadMore;\n","\nimport { defineComponent, computed, onMounted } from 'vue';\nimport columnList from '../../components/column-item.vue';\nimport { useStore, mapGetters } from 'vuex';\nimport { GlobalDataProps } from '../../stores/type';\nimport useLoadMore from '../../hooks/use-load-more';\nexport default defineComponent({\n  name: 'Home',\n  components: { columnList },\n  // computed: {\n  //   ...mapGetters('columns', { list: 'getColumns' })\n  // },\n\n  setup() {\n    const store = useStore<GlobalDataProps>();\n    const total = computed(() => store.state.columns.total);\n    const currentPage = computed(() => store.state.columns.currentPage);\n    // 全局类型会有自动补全功能\n    onMounted(() => {\n      store.dispatch('columns/getColumnsAction', { pageSize: 6 }, { root: true });\n    });\n    // 状态储存是响应式，从store实例读取状态最简单的方法是在计算属性中返回某个状态\n\n    const list = computed(() => store.getters['columns/getColumns']);\n    const biggerColumnLen = computed(() => store.getters['columns/biggerColumnLen']);\n    const { loadMorePage, isLastPage } = useLoadMore('columns/getColumnsAction', total, {\n      pageSize: 6,\n      currentPage: currentPage.value ? currentPage.value + 1 : 2\n    });\n\n    return {\n      biggerColumnLen,\n      list,\n      loadMorePage,\n      isLastPage\n    };\n  }\n});\n","import { render } from \"./index.vue?vue&type=template&id=1f9f999c\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","module.exports = __webpack_public_path__ + \"img/create-ico.655b5932.png\";"],"sourceRoot":""}